#!/usr/bin/python

import os, sys, string, getopt

from datafiles import DATAFILES

def dohelp():

   print "No help available yet"
  
   return

def MAIN():

   helpflag = 0
   ftype = None
   nstring = None
   wanted = "compare"
   content = "xml"

   mycommand = os.path.basename(sys.argv[0])

   if ( mycommand == "xmlresultfile" ):
      content = "xml"
      wanted = "result"
   elif (mycommand == "xmlcomparefile" ):
      content = "xml"
      wanted = "compare"
   elif (mycommand == "uricomparefile" ):
      content = "uri"
      wanted = "compare"
   elif (mycommand == "uriresultfile" ):
      content = "uri"
      wanted = "result"
   elif (mycommand == "uridifffile" ):
      content = "uri"
      wanted = "diff"
   elif (mycommand == "xmldifffile" ):
      content = "xml"
      wanted = "diff"
   elif (mycommand == "binsresultfile" ):
      content = "bins"
      wanted = "result"
   elif (mycommand == "binscomparefile" ):
      content = "bins"
      wanted = "compare"
   elif (mycommand == "binsdifffile" ):
      content = "bins"
      wanted = "diff"
   else:
      content = "xml"
      wanted = "compare"

   opts, args = getopt.getopt(sys.argv[1:], "t:q:w:c:", ["help", "filetype=", "query=", "which=", "content="])

   for o, a in opts:
      if o in ("-t", "--filetype"):
         ftype = a
      if o in ("--help"):
         helpflag = 1
      if o in ("-q", "--query"):
         nstring = a
      if o in ("-w", "--which"):
         wanted = a
      if o in ("-c", "--content"):
         content = a

   if ( nstring == "NoQuErY" ):
      nstring = ""

   if (helpflag == 1):
      dohelp()
      sys.exit(1)

   myfile = DATAFILES(nstring, ftype)

   x = myfile.getwanted(wanted, content)

   print x

   sys.exit(0)

if __name__ == "__main__":
   MAIN()

