# This completes the environment setup for running testenv.git tests.
# Specific variables, such as VIVHOST, should be set before invoking this.

export TEST_ROOT="${TEST_ROOT:-$(pwd)}"

# Set our open file limit as high as we can
ulimit -n $(ulimit -Hn)

export ANT_HOME="${ANT_HOME:-/usr/java/ant}"

export PATH=$ANT_HOME/bin:$TEST_ROOT/bin:$TEST_ROOT/utils/bin:$PATH

export CLASSPATH=$TEST_ROOT/lib:$TEST_ROOT/lib/velocity.jar:$TEST_ROOT/lib/junit.jar:.
export PYTHONPATH="${PYTHONPATH:-$TEST_ROOT/lib}"
export RUBYLIB="${RUBYLIB:-$TEST_ROOT/lib/ruby/lib}"

# Blithely continue after Velocity API exception returns.
# (I can't image why anyone would want to set this to "True". - Bruce)
export VIVEXCONTINUE="${VIVEXCONTINUE:-False}"

export DEFAULTSUBCOLLECTION="${DEFAULTSUBCOLLECTION:-live}"

export TEST_USE_COLOR="${TEST_USE_COLOR:-auto}"

# Target http port, usually 80
export VIVHTTPPORT="${VIVHTTPPORT:-80}"

# Target search port (what is this for?)
export VIVPORT="${VIVPORT:-7205}"

# Vivisimo password, some tests fail with punctuation in passwords :-(
export VIVPW="${VIVPW:-mustang5}"

# Vivisimo administrator user, that already exists on the target Velocity.
export VIVUSER="${VIVUSER:-gary_testing}"

# Vivisimo virtual directory
export VIVVIRTUALDIR="${VIVVIRTUALDIR:-vivisimo}"

################################################################
#### Defaults, often overridden
################################################################

# ASPX directory (only used if set)
#### export VIVASPXDIR="${VIVASPXDIR:-asp}"

# Target host name (can be an IP address)
export VIVHOST="${VIVHOST:-localhost}"

# Do we delete collections as test end? "all", "pass", "fail" or "never"
export VIVDELETE="${VIVDELETE:-never}"

# Do we kill services at the beginning and/or end of tests?
export VIVKILLALL="${VIVKILLALL:-False}"

# Do we completely reset the Velocity system a the beginning of (some) tests?
export VIVWIPE="${VIVWIPE:-False}"

# Target OS and hardware architecture
export VIVTARGETARCH="${VIVTARGETARCH:-linux64}"

# Target host operating system
export VIVTARGETOS="${VIVTARGETOS:-${VIVTARGETARCH%%[0-9][0-9]}}"

# A verbose text description of the target system.
export OSSTRING="${OSSTRING:-$VIVTARGETARCH}"

# Target Velocity major version
export VIVVERSION="${VIVVERSION:-8.0}"
