
# [date<, format>] => [int, [int<, int ...>]]

# The final sub list is known errors (in seconds) which a tolerant
# test will pass.
PARSE_DATE_CASES = [
  # Pulled from the Velocity documentation:
  # RFC 2616 3.3.1 (HTTP protocol) which supports:
  [["Sun, 06 Nov 1994 08:49:37 GMT"], [784111777, nil]],
  [["Sunday, 06-Nov-94 08:49:37 GMT"], [784111777, nil]],
  [["Sun Nov 6 08:49:37 1994"], [784129777, nil]],
  # Dates without week day name:
  [["06 Nov 1994 08:49:37 GMT"], [784111777, nil]],
  [["06-Nov-94 08:49:37 GMT"], [784111777, nil]],
  [["Nov 6 08:49:37 1994"], [784129777, nil]],
  # Dates without the time zone:
  [["06 Nov 1994 08:49:37"], [784129777, nil]],
  [["06-Nov-94 08:49:37"], [784129777, nil]],
  [["1994-11-06 08:49:37 PM"], [784172977, nil]],
  [["1994-11-06 20:49:37"], [784172977, nil]],
  [["1994/11/06 08:49:37 PM"], [784172977, nil]],
  [["1994/11/06 20:49:37"], [784172977, nil]],
  [["11-06-1994 08:49:37 PM"], [784172977, nil]],
  [["11-06-1994 20:49:37 PM"], [784172977, nil]],
  [["11/06/1994 08:49:37 PM"], [784172977, nil]],
  [["11/06/1994 20:49:37"], [784172977, nil]],
  [["19941106204937"], [784172977, nil]],
  [["1994-11-06T20:49:37"], [784172977, nil]],
  # Dates in a weird order:
  [["1994 Nov 6 08:49:37"], [784129777, nil]],
  [["GMT 08:49:37 06-Nov-94 Sunday"], [784111777, nil]],
  [["94 6 Nov 08:49:37"], [784129777, nil]],
  # Dates without times:
  # Velocity on Windows treats these as EDT. Really are EST.
  [["1994 Nov 6"], [784098000, [-3600]]],
  [["06-Nov-94"], [784098000, [-3600]]],
  [["Sun Nov 6 94"], [784098000, [-3600]]],
  [["1994/11/06"], [784098000, [-3600]]],
  [["1994-11-06"], [784098000, [-3600]]],
  [["19941106"], [784098000, [-3600]]],
  [["11/06/1994"], [784098000, [-3600]]],
  [["11-06-1994"], [784098000, [-3600]]],
  # Dates with unusual separators:
  [["1994.Nov.6"], [784098000, [-3600]]],
  [["Sun/Nov/6/94/GMT"], [784080000, nil]],
  # Time zones specified using RFC 822 style:
  [["Sun, 12 Sep 2004 15:05:58 -0700"], [1095026758, nil]],
  [["Sat, 11 Sep 2004 21:32:11 +0200"], [1094931131, nil]],
  # Compact numerical date strings:
  [["20040912 15:05:58 -0700"], [1095026758, nil]],
  [["20040911 +0200"], [1094853600, nil]],

  # Edges near 32bit max/min and zero.
  [['1901-12-13T20:45:51Z'], [-2147483649, nil]],
  [['1901-12-13T20:45:52Z'], [-2147483648, nil]],
  [['1901-12-13T20:46:00Z'], [-2147483640, nil]],

  [['1969-12-31T23:59:00Z'], [-60, nil]],
  [['1969-12-31T23:59:58Z'], [-2, nil]],
  [['1969-12-31T23:59:59Z'], [-1, [1]]],

  [['2038-01-19T03:14:00Z'], [2147483640, nil]],
  [['2038-01-19T03:14:07Z'], [2147483647, nil]],
  [['2038-01-19T03:14:08Z'], [2147483648, nil]],

  # Additional test cases from xslt/vivParseDate
  [["01-Jan-1970 00:00:00 GMT"], [0, nil]],
  [["01-Jan-1970 00:00:01 GMT"], [1, nil]],
  [["19-Jan-2038 03:14:07 GMT"], [2147483647, nil]],
  [["19-Jan-2038 03:14:06 GMT"], [2147483646, nil]],
  [["19-Jan-2018 03:14:07 GMT"], [1516331647, nil]],
  [[""], [0, nil]],
  [["20380119 03:14:07 GMT"], [2147483647, nil]],
  [["January 19, 2038 03:14:07 GMT"], [2147483647, nil]],
  [["January 19, 2038 03:14:08 GMT"], [2147483648, nil]],
  [["19-Jan-2038 03:14:07 GMT", "%d-%b-%Y %H:%M:%S %Z"], [2147483647, nil]],
  [["07-Feb-2106 06:28:15 GMT"], [4294967295, nil]],
  [["February 7, 2106 06:28:15 GMT"], [4294967295, nil]],
  [["31-Dec-2007 00:00:00"], [1199077200, nil]],
  [["20071231 00:00:00"], [1199077200, nil]],
  [["2007-12-31 00:00:00"], [1199077200, nil]],
  [["31-Dec-2007 23:59:59"], [1199163599, nil]],
  [["01-Jan-2008 00:00:00"], [1199163600, nil]],
  [["01-Jan-2008 00:00:01"], [1199163601, nil]],
  [["01-Jan-2008 23:59:59"], [1199249999, nil]],
  [["06-Apr-2003 01:59:59"], [1049612399, [-3600]]],
  [["06-Apr-2003 02:00:00"], [1049612400, [-3600]]], # undefined
  [["06-Apr-2003 02:00:01"], [1049612401, [-3600]]], # undefined
  [["06-Apr-2003 08:00:00"], [1049630400, nil]],
  [["11-Mar-2007 01:59:59"], [1173596399, nil]],
  [["11-Mar-2007 02:00:00"], [1173596400, [-3600]]],
  [["11-Mar-2007 02:00:01"], [1173596401, [-3600]]],
  [["11-Mar-2007 03:00:00"], [1173596400, nil]],
  [["09-Mar-2008 01:59:59"], [1205045999, nil]],
  [["09-Mar-2008 02:00:00"], [1205046000, [-3600]]], # undefined
  [["09-Mar-2008 02:00:01"], [1205046001, [-3600]]], # undefined
  [["09-Mar-2008 02:01:00"], [1205046060, [-3600]]], # undefined
  [["09-Mar-2008 02:10:00"], [1205046600, [-3600]]], # undefined
  [["09-Mar-2008 02:10:00 EDT"], [1205043000, [3600]]],
  [["09-Mar-2008 02:59:59"], [1205049599, [-3600]]],
  [["09-Mar-2008 03:00:00"], [1205046000, nil]],
  [["09-Mar-2008 08:00:00"], [1205064000, nil]],
  [["26-Oct-2003 00:59:59"], [1067144399, nil]],
  [["26-Oct-2003 01:59:59"], [1067147999, [-3600]]], # ambiguous
  [["26-Oct-2003 02:00:00"], [1067151600, [-3600]]],
  [["26-Oct-2003 02:00:01"], [1067151601, [-3600]]],
  [["04-Nov-2007 00:59:59"], [1194152399, nil]],
  [["04-Nov-2007 01:59:59"], [1194155999, [-3600,3600]]], # ambiguous
  [["04-Nov-2007 02:00:00"], [1194159600, nil]],
  [["04-Nov-2007 02:00:01"], [1194159601, nil]],
  [["04-Nov-2007 08:00:00"], [1194181200, nil]],
  [["02-Nov-2008 00:00:00"], [1225598400, nil]],
  [["02-Nov-2008 00:59:59 EDT"], [1225601999, [-3600]]], # just broken in Velocity
  [["02-Nov-2008 00:59:59"], [1225601999, nil]],
  # I love this one. Velocity Linux is off -1 hour, Velocity Windows +1 hour!
  [["02-Nov-2008 01:59:59 EDT"], [1225605599, [-3600,3600]]], # ambiguous
  [["02-Nov-2008 02:00:00 EST"], [1225609200, nil]],
  [["02-Nov-2008 02:00:01 EST"], [1225609201, nil]],
  [["02-Nov-2008 08:00:00 EST"], [1225630800, nil]],
  [["30-Mar-2003 00:59:59 UTC"], [1048985999, nil]],
  [["30-Mar-2003 01:00:00 UTC"], [1048986000, nil]],
  [["30-Mar-2003 01:00:01 CET"], [1048982401, nil]],
  [["26-Oct-2003 00:59:59 UTC"], [1067129999, nil]],
  [["26-Oct-2003 01:00:00 UTC"], [1067130000, nil]],
  [["26-Oct-2003 01:00:00 MSK"], [1067119200, nil]],
  [["26-Oct-2003 01:00:01 UTC"], [1067130001, nil]],
  [["26-Oct-2003 00:59:59 CET"], [1067126399, nil]],
  [["26-Oct-2003 00:59:59 CET", "%d-%b-%Y %H:%M:%S %Z"], [1067126399, nil]],
  [["26-Oct-2003 01:00:00 WET"], [1067130000, nil]],
  [["26-Oct-2003 01:00:01 MSD"], [1067115601, nil]],
  [["21-Jun-2007"], [1182398400, nil]],
  [["21-Jun-2007 GMT", "%d-%b-%Y %Z"], [1182384000, nil]],
  [["21-Oct-2007"], [1192939200, nil]],
  [["31-Oct-2007"], [1193803200, nil]],
  [["01-Nov-2007"], [1193889600, nil]],
  [["10-Nov-2007"], [1194670800, nil]],
  [["21-Nov-94"], [785394000, nil]],
  [["21-Nov-1994"], [785394000, nil]],
  [["11-21-1994"], [785394000, nil]],
  [["11/21/1994"], [785394000, nil]],
  [["1994/11/21"], [785394000, nil]],
  [["November 21, 1994", "%b %d, %Y"], [785394000, nil]],
  [["Sun Nov  6 08:49:37 1994"], [784129777, nil]],
  [["Nov  6 08:49:37 1994"], [784129777, nil]],
  [["Sun, 06 Nov 1994 08:49:37 CET"], [784108177, nil]],
  [["06 Nov 1994 08:49:37 EST"], [784129777, nil]],
  [["afjklajfdla 06 Nov 1994 08:49:37 GMT"], [0, nil]],
  [["06 Doc 6 08:49:37 1994"], [0, nil]],
  [["06 Doc 6 08:49:37 1994", "%d %b %d %H:%M:%S %Y"], [0, nil]],
  [["-1 Jan 1970"], [0, nil]],
  [["Dec 32 1994"], [0, nil]],
  [["Dec 30, 1969"], [-154800, nil]],
  [["Dec 30, 2060"], [2871608400, nil]],
  [["July 4, 1776"], [-6106042800, [-3600, -238]]],
  [["1776-07-04T00:00:00Z"], [-6106060800, nil]],
  [["06 Jul 2005 14:00:00 EST"], [1120676400, nil]],
  [["06 Jul 2005 14:00:00 EDT"], [1120672800, nil]],
  [["06 Jul 2005 14:00:00 PST"], [1120687200, nil]],
  [["06 Jul 2005 14:00:00 PDT"], [1120683600, nil]],
  [["06 Jul 2005 14:00:00 PDT", "%d %b %Y %H:%M:%S %Z"], [1120683600, nil]]
]
